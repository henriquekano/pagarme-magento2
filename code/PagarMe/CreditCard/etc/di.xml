
<?xml version="1.0"?>
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">
  
  
  <virtualType name="PagarMeCreditCardAuthorizeCommand" type="Magento\Payment\Gateway\Command\GatewayCommand">
    <arguments>
      <argument name="validator" xsi:type="object">PagarMe\CreditCard\Validator\ResponseValidator</argument>
    </arguments>
  </virtualType>
  
  
  <virtualType name="PagarMeCreditCardAuthorizationHandler" type="Magento\Payment\Gateway\Response\HandlerChain">
    <arguments>
      <argument name="handlers" xsi:type="array">
        <item name="payment_details" xsi:type="string">PagarMe\CreditCard\Gateway\Response\CreditCardDetailsHandler</item>
      </argument>
    </arguments>
  </virtualType>

  <virtualType name="PagarMeCreditCardAuthorizeRequest" type="Magento\Payment\Gateway\Request\BuilderComposite">
    <arguments>
      <argument name="builders" xsi:type="array">
        <item name="payment" xsi:type="string">PagarMe\CreditCard\Gateway\Request\PaymentDataBuilder</item>
      </argument>
    </arguments>
  </virtualType>

  <virtualType name="PagarMeCreditCardAuthorizeCommand" type="Magento\Payment\Gateway\Command\GatewayCommand">
    <arguments>
      <argument name="requestBuilder" xsi:type="object">PagarMeCreditCardAuthorizeRequest</argument>
      <argument name="transferFactory" xsi:type="object">PagarMe\CreditCard\Gateway\Http\TransferFactory</argument>
      <argument name="client" xsi:type="object">PagarMe\CreditCard\Gateway\Http\Client\TransactionSale</argument>
      <argument name="handler" xsi:type="object">PagarMeCreditCardAuthorizationHandler</argument>
      <argument name="validator" xsi:type="object">PagarMe\CreditCard\Gateway\Validator\ResponseValidator</argument>
    </arguments>
  </virtualType>
  
  <virtualType name="PagarMeCreditCardCommandPool" type="Magento\Payment\Gateway\Command\CommandPool">
    <arguments>
      <argument name="commands" xsi:type="array">
        <item name="authorize" xsi:type="string">PagarMeCreditCardAuthorizeCommand</item>
      </argument>
    </arguments>
  </virtualType>
</configuration>
